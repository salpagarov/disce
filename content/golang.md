---
title: Совсем другая книга про Go
---

# Совсем другая книга про Go

"Маленькие книги" Карла Сегуина – лучшее, что только есть в жанре "быстрого старта". В них только самое главное. Подробности, в которых так легко утонуть поначалу, так же легко восполнить правильно заданными вопросами и самостоятельно найденными ответами. 

Когда-то "Маленькая книга про Go" вдохновила меня написать несколько других "маленьких книг" на темы, для которых книг Карла не было. А потом, когда я сам пришел к Go и вернулся к этой книге, вдруг оказалось, что многое изменилось. Это будет совсем другая книга про Go. Не судите строго.

Go это "C++ для маленьких". Звучит странно, но именно такие ожидания были в Google от нового языка программирования. Простой, производительный, безопасный. В итоге получился компактный компилируемый язык со строгой типизацией, автоматическим управлением памятью, поддержкой многозадачности. С модульной организацией кода и своим менеджером пакетов, дающем доступ к большой библиотеке готовых решений, позволяющих даже новичку быть достаточно эффективным. И еще большему количеству сторонних пакетов – прямо из Интернета.

Он хорош во всем, кроме кривой обучения. В качестве первого языка он не то, чтобы ужасен, но… здесь уже с самого начала надо знать то, что обычно изучается в последнюю очередь. Рассказывать о нем – настоящий вызов. Но я попробую. Опять же, не судите строго.

## Первая программа

У пресловутого "Hello, World" несколько целей. Во-первых, убедиться, что всё нужное для работы установлено и настроено. Во-вторых, как на первом свидании, увидеть в действии, оценить перспективы. А в-третьих, преодолеть психологический барьер: программа уже написана и работает — осталось только понять, как. 

В любом текстовом редакторе создайте файл `hello.go`:

~~~go
package main

func main() {
    println("Hello, world!")
}
~~~

Выполните его:

~~~
$ go run hello.go
Hello, world!
~~~

Или скомпилируйте и выполните:

~~~
$ go build hello.go
$ ./hello
Hello, world!
~~~

Вот, собственно и все. А теперь давайте разбираться.

## Немного теории

Любое сложное действие делится на простые, те – на еще более простые, и так до самых простых машинных команд. Это называется декомпозицией – и это основа всего программирования. 

Где-то между решением шахматного этюда и двоичным кодом проходит граница, разделяющая интеллектуальный труд человека и механическую работу компилятора при создании машинного кода. Это уровень абстракции, у каждого языка он свой, и это определяет его применимость в предметной области. 

Единицей декомпозиции в Go являются функции. Но не те, что в математике (или, скажем, в языке программирования Haskell). Они получают аргументы и возвращают значения, но если там значение зависит только от аргументов, то здесь это скорее подпрограммы – их нельзя, однажды вычислив, просто заменить готовым значением при повторном вызове.

Весь код в Go, по обе стороны уровня абстракции, организован в виде пакетов и модулей. 

## Пакеты

Пакет это единица компиляции, директория с файлами. В файлах – функции с кодом на Go и переменные с данными. Технически это директория с файлами, в файлах… [дописать и привести пример]

## Модули

Модуль – более самостоятельная единица организации кода. Стандартная библиотека состоит из модулей, сторонние модули можно подключать прямо из интернета, у них есть версии. Они используются для управления зависимостями – чтобы указать, какая именно версия модуля нужна для вам для работы.

## —



##Команда Go

Это официальное название. Одна-единственная "команда go" используется для компиляции, выполнения, тестирования, управления зависимостями, форматирования исходного кода… для всего.  Настоящий "швейцарский нож" и осваивать его лучше постепенно.



Теперь вы знаете, как превратить исходный код на Go в двоичный код для ваших операционной системы (Windows, Linux, MacOS, Android, iOS и еще несколько) и вашего процессора (тоже с десяток разновидностей). 

## Пакеты

Пакет это единица компиляции. Из них, как из модулей

Из них, как из кубиков, собираются программы. Одни пакеты входят в стандартную библиотеку, другие – ваши собственные, третьи написаны кем-то еще. Одним пакетам для работы нужны другие, тем – третьи, и все вместе они образуют деревья зависимостей. В вашей первой программе пакету `main` для работы нужен пакет `fmt`. Какие пакеты нужны для работы `fmt` – мы не знаем и нам это не нужно. После сборки мы получаем исполнимый файл





Программы на Go это тоже пакеты, единственное отличие которых заключается в том, что они всегда называются `main`. Такие пакеты после компиляции собираются в единый исполнимый файл, куда кроме самого пакета `main` входит еще и целое дерево зависимостей – пакеты, нужные для ему работы, пакеты, нужные для работы им, и так далее. В нашем примере пакет `fmt`



Именно поэтому в результате исполнимый файл получается сравнительно большой, но автономный и ни от чего не зависящий. Просто cкопируй – и запускай.

