---
title: Совсем другая книга про Go
---

# Совсем другая книга про Go

"Маленькие книги" Карла Сегуина – лучшее, что только есть в жанре "быстрого старта". В них только самое главное. Подробности, в которых так легко утонуть поначалу, так же легко восполнить правильно заданными вопросами и самостоятельно найденными ответами. 

Когда-то "Маленькая книга про Go" вдохновила меня написать несколько других "маленьких книг" на темы, для которых книг Карла не было. А потом, когда я сам пришел к Go и вернулся к этой книге, вдруг оказалось, что многое изменилось. Это будет совсем другая книга про Go. Не судите строго.

Go это "C++ для маленьких". Звучит странно, но именно такие ожидания были в Google от нового языка программирования. Простой, производительный, безопасный. В итоге получился компактный компилируемый язык со строгой типизацией, автоматическим управлением памятью, поддержкой многозадачности, модульной организацией кода и своим менеджером пакетов, дающем доступ к большой библиотеке готовых решений, позволяющих даже новичку быть достаточно эффективным.

Он хорош во всем, кроме кривой обучения. В качестве первого языка он не то, чтобы ужасен, но… здесь с самого начала надо знать то, что обычно изучается в последнюю очередь. Рассказывать о нем – настоящий вызов. Но я попробую. Опять же, не судите строго.

## Первая программа

У пресловутого "Hello, World" несколько целей. Во-первых, убедиться, что всё нужное для работы установлено и настроено. Во-вторых, как на первом свидании, увидеть в действии и оценить перспективы. А в-третьих, преодолеть психологический барьер: программа уже написана и работает — осталось только понять, как она это делает. 

В любом текстовом редакторе создайте файл `hello.go`:

~~~go
package main

func main() {
    println("Hello, world!")
}
~~~

Выполните его:

~~~
$ go run hello.go
Hello, world!
~~~

Или скомпилируйте и выполните:

~~~
$ go build hello.go
$ ./hello
Hello, world!
~~~

Вот, собственно и все. А теперь давайте разбираться.

##Команда Go

Мы научились превращать файлы с исходным кодом на языке программирования Go в двоичный файл для ваших операционной системы (Windows, Linux, MacOS, iOS, Android…) и процессора (тоже с десяток вариантов). Одна-единственная "команда Go" (это официальное название) также используется для тестирования, управления зависимостями, форматирования исходного кода… для всего. Это настоящий "швейцарский нож" и осваивать его лучше постепенно.

## Немного теории

Любое сложное действие делится на простые, те – на еще более простые, и так до самых простых машинных команд. Это – декомпозиция, основа всего программирования. Где-то между решением шахматного этюда и машинным кодом проходит граница, разделяющая интеллектуальный труд человека и механическую работу компилятора. Это – уровень абстракции, он у каждого языка свой. Все, что ниже этого уровня, компилятор превратит в код уже сам.

### Функции

Единицей декомпозиции в Go являются функции. Но не те, что в математике (или, скажем, в языке программирования Haskell). Они так же получают аргументы и возвращают значения, но если "там" значение зависит только от аргументов, то "здесь" это скорее подпрограммы – их нельзя, однажды вычислив, просто заменить готовым значением при повторном вызове.

Любая программа – это функция `main`, из которой вызываются другие функции – библиотечные, ваши, чьи-то еще.

### Пакеты

Одну или несколько функций можно объединить в пакет. Пакет – единица компиляции. Из них, как из кубиков, строится программа. Единица компиляции – сущность атомарная, в конечную программу попадают не только вызываемые функции, а весь пакет целиком.

### Модули

Модуль – единица организации кода. Она включает в себя один или несколько пакетов, и имеет версию. Модульная организация используется для управления зависимостями, при построении программы можно указать не только на пакеты, но и не их версию. Это спасает в ситуациях, когда работающая программа перестает собираться из-за того, что какой-то из пакетов за это время обновится и потерял совместимость.

## Вторая программа

Теперь посмотрим на устройство программы с высоты новых знаний. Это будет не один файл, а целая файловая структура.

~~~
MyDemoProject/hello.go
MyDemoProject/greetings.go
MyDemoProject/module01/data.do
~~~

Теперь содержимое `hello.go`:

~~~go
package main
import "helloworld/mod"

func main() {
	say(mod.Greetings("world"))
	say("Ultimage Answer is", mod.A)
}
~~~

`greetings.go`:

~~~go
package main
import "fmt"

func say(str) {
	fmt.Println(str)
}
~~~

`mod/greeting.go`

~~~go
package mod

func Greetings(name : string) {
    return "Hello, " + name + "!"
}
~~~

`mod/answer.go`

~~~go
package mod

var A=42
~~~
